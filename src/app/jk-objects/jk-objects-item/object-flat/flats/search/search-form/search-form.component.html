<div class="search-form__container" [ngClass]="{'search-form__container--slide' : moreFilter}">

    <form [formGroup]="form" class="search-form">

        <app-search-sorting
            [(ngModel)]="sort"
            [ngModelOptions]="{standalone: true}"
            (ngModelChange)="sortChange.emit(sort)"
            [topPos]="showChess">
        </app-search-sorting>

        <app-search-house-select
            [value]="form.controls['houses'].value"
            [housesList]="config.housesList"
            [formControl]="form.controls['houses']">
        </app-search-house-select>

        <div class="search-form__wrap">

            <div class="search-form__wrap-item search-form__wrap-item_room">
                <p class="search-form__subtitle">Количество комнат</p>
                <ul class="search-form__rooms">
                    <li formArrayName="rooms" *ngFor="let control of form.controls['rooms']['controls']; let i = index"
                        class="search-form__rooms-item">
                        <label class="search-form__rooms-checkbox">
                            <input [formControl]="control" [style.display]="'none'" name="rooms" type="checkbox">
                            <div class="search-form__rooms-checkbox_for-click search-form__text"
                                 [class.search-form__rooms-checkbox_for-click-first]="i === 0">
                                {{(i === 0) ? 'Ст' : (i === 3) ? '3+' : i}}
                            </div>
                        </label>
                    </li>
                </ul>
            </div>

            <div class="search-form__wrap-item search-form__wrap-item_price">
                <p class="search-form__subtitle">Цена</p>

                <div class="search-form__range search-form__range_price">
                    <div class="search-form__range-text search-form__text">
                        <p><span #minPrice></span> &#8381;</p>
                        <span></span>
                        <p><span #maxPrice></span> &#8381;</p>
                    </div>

                    <ghm-range-number
                        [formControl]="form.controls['price']"
                        [min]="config.price.min"
                        [max]="config.price.max"
                        [toFixed]="true"
                        (move)="minPrice.innerHTML = ($event.min).toFixed(0); maxPrice.innerHTML = ($event.max).toFixed(0)">
                    </ghm-range-number>
                </div>
            </div>

            <div class="search-form__wrap-item search-form__wrap-item_square">
                <p class="search-form__subtitle">Площадь м²</p>

                <div class="search-form__range search-form__range_square">
                    <div class="search-form__range-text search-form__text">
                        <p><span #minSpace></span></p>
                        <span></span>
                        <p><span #maxSpace></span></p>
                    </div>

                    <ghm-range-number
                        [formControl]="form.controls['space']"
                        [min]="config.space.min"
                        [max]="config.space.max"
                        (move)="minSpace.innerHTML = $event.min; maxSpace.innerHTML = $event.max">
                    </ghm-range-number>
                </div>
            </div>

            <div class="search-form__wrap-item search-form__wrap-item_floor">
                <p class="search-form__subtitle">Этаж</p>

                <div class="search-form__range search-form__range_floor">
                    <div class="search-form__range-text search-form__text">
                        <p><span #minFloor></span></p>
                        <span></span>
                        <p><span #maxFloor></span></p>
                    </div>

                    <ghm-range-number
                        [formControl]="form.controls['floor']"
                        [min]="config.floor.min"
                        [max]="config.floor.max"
                        [toFixed]="true"
                        (move)="minFloor.innerHTML = $event.min; maxFloor.innerHTML = $event.max">
                    </ghm-range-number>
                </div>
            </div>

            <div class="search-form__wrap-item search-form__wrap-item_corpus">
                <p class="search-form__subtitle">Виды отделки</p>

                <div class="search-form__range search-form__range_corpus" (click)="showCorpus = !showCorpus">
                    <p class="search-form__text">
                        {{ decorationList ? decorationList : 'Все виды'}}
                    </p>
                </div>

                <app-search-checkbox-list *ngIf="showCorpus"
                    [btnList]="config.decorationList"
                    [formControl]="form.controls['decoration']"
                    (decoration)="decorationList = $event"
                    [name]="'decoration'">
                </app-search-checkbox-list>
            </div>

            <button class="search-form__reset-filter btn-empty" (click)="formReset()">Сбросить фильтры</button>
            <!-- <button class="search-form__btn" [class.search-form__btn_open]="moreFilter"
                (click)="moreFilter = !moreFilter">Еще параметры</button> -->
        </div>

        <!-- <div class="search-form__wrap search-form__wrap_decoration" [class.search-form__wrap_decoration--show]="moreFilter">
            <app-search-checkbox-list 
                [style.pointerEvents]="moreFilter ? 'all' : 'none'"
                [btnList]="config.decorationList"
                [formControl]="form.controls['decoration']"
                [name]="'decoration'">
            </app-search-checkbox-list>
        </div> -->

    </form>

</div>
